# 6.1. Типы и структура СУБД  

## Задача 1  

   Выбор типов БД для следующих сущностей:  
   * Электронные чеки в json виде - здесь напрашиваются документо-ориентированные БД, например MongoDB. Хранение
     документов в виде файлов json.
   * Склады и автомобильные дороги для логистической компании - реляционная БД, согласованность данных, SQL запросы, 
     надежность.
   * Генеалогические деревья - иерархическая, где записи связаны друг с другом через связи в отношениях родитель-потомок.
   * Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации - ключ-значение, где данным 
     можно присваивать Time-to-Live.
   * Отношения клиент-покупка для интернет-магазина - для клиента важна скорость отклика, думаю БД ключ-значение, в 
     качестве кеширующего слоя для работы с данными из другой, более медленной СУБД.

## Задача 2  

   Классификации по CAP-теореме  
   * Данные записываются на все узлы с задержкой до часа (асинхронная запись) - при отсутствии сетевого разделения и 
     если предполагается корректный ответ пусть и с задержкой, то доступная и согласованная, CA. Хотя может быть и 
     вариант PC, если жертвуем доступностью.
   * При сетевых сбоях, система может разделиться на 2 раздельных кластера - доступная, но не согласованная, PA.
   * Система может не прислать корректный ответ или сбросить соединение - получается нет согласованности и нет 
     доступности, только P.  

   По PACELC теореме, первый вариант я бы расшифровал как PC/EC, т.е. при разделении система согласована, но жертвует 
   доступностью и скоростью. Второй вариант PA/EL, т.е. доступная и при отсутствии разделения стремится к скорости, 
   либо PA/EC если делаем ставку на согласованность. Третий - не то не сë, опять остается только P.  
   
## Задача 3  

   Могут ли в одной системе сочетаться принципы BASE и ACID? Наверное и да и нет. Они же противопоставляют себя друг 
   другу, ведь если система допускает деградацию части сессий и неверные ответы, то она уже не может подходить под 
   требования изоляции и быть высоконадежной. С другой стороны, BASE системы могут стремиться к высоко-надежным в части
   требований. По сути, разница от ACID в том, что BASE системы фактически отказываются от изоляции, а по остальным 
   требованиям (стойкость, согласованность и атомарность) можно было бы подтянутся. Например, некоторые БД даже 
   предлагают отдельные API для атомарности.  
   
## Задача 4  

   Модель Pub/Sub включает в себя два компонента, это издатель (Publisher), который отправляет сообщение и подписчик 
   (Subscriber), который принимает сообщение через брокера сообщений. Pub напрямую не привязан отправкой сообщения к 
   Sub, вместо этого, сообщения в такой модели делятся на классы или темы. Издатель отправит сообщения в тему, а тема 
   мгновенно отправит сообщение всем подписчикам, причем могут быть созданы политики для подписчиков, которые будут 
   фильтровать сообщения. Т.е. можно создать сервисы без постоянного запроса сообщений в очереди сообщений. Это такой
   шаблон, который изолирует издателей от подписчиков, поэтому издателям не нужно знать, где используется сообщение, в
   то время как подписчику не нужно знать об издателе. Что в свою очередь помогает улучшить общую безопасность
   приложения. К минусам отнес бы излишнюю сложность (настроить, поддержать) в небольших системах. Не подойдёт и для
   мультимедиа. Pub/Sub по сути это асинхронный метод обмена сообщениями, а для потокового аудио или видео требуется 
   синхронная передача данных.  
   Для предполагаемой задачи, в качестве Pub/Sub системы, можно рассмотреть например Redis.  
   
